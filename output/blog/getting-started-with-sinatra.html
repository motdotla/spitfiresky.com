<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Getting Started with Sinatra &laquo; Spitfire Sky</title>
    <link charset='utf-8' href='/css/blog_base.css' media='all' rel='Stylesheet' type='text/css' />
    <link href='http://feeds.feedburner.com/spitfiresky' rel='alternate' title='Spitfire Sky RSS Feed' type='application/rss+xml' />
  </head>
  <body id='top'>
    <div class='container_12' id='page'>
      <div class='grid_4' id='header'>
        &nbsp;
      </div>
      <div class='grid_8' id='header'>
        <div id='articles'>
          <ul>
            <li>
              <span>30 Dec 2010</span>
              &raquo;
              <a href="/blog/an-app-scottbalance.html">An App - Scottbalance</a>
            </li>
            <li>
              <span>28 Sep 2010</span>
              &raquo;
              <a href="/blog/riverside-ruby-introduction-to-ruby.html">Riverside Ruby - Introduction to Ruby</a>
            </li>
            <li>
              <span>31 May 2010</span>
              &raquo;
              <a href="/blog/getting-started-with-sinatra.html">Getting Started with Sinatra</a>
            </li>
            <li>
              <span>03 Oct 2009</span>
              &raquo;
              <a href="/blog/how-you-should-be-doing-testing-in-rails.html">How you should be doing testing in Rails and how to get started</a>
            </li>
            <li>
              <span>07 Sep 2009</span>
              &raquo;
              <a href="/blog/sdruby-presentation-on-titanium-mobile.html">Sdruby Presentation on Titanium-Mobile</a>
            </li>
            <li>
              <span>29 Aug 2009</span>
              &raquo;
              <a href="/blog/caching-with-mongomapper.html">Counter Caching with MongoMapper</a>
            </li>
            <li>
              <span>07 Aug 2009</span>
              &raquo;
              <a href="/blog/recap-of-my-sdruby-presentation-on-mongodb.html">Recap of my sdruby presentation on mongodb</a>
            </li>
            <li>
              <span>28 Jul 2009</span>
              &raquo;
              <a href="/blog/choice-email-setup-with-merb.html">Choice Email Setup with Merb</a>
            </li>
            <li>
              <span>23 Jul 2009</span>
              &raquo;
              <a href="/blog/my-server-setup.html">My Server Setup</a>
            </li>
            <li>
              <span>15 Jul 2009</span>
              &raquo;
              <a href="/blog/introduction.html">Introduction</a>
            </li>
          </ul>
        </div>
        <div id='nav'>
          <a class='show_articles' href='#top'>Articles list</a>
        </div>
      </div>
      <div class='grid_4' id='sidebar'>
        <a href='/'>
          <img src='/images/logo.png' />
        </a>
        <p>
          <a href='/blog'>
            <img src='/images/house.png' />
          </a>
          <a class='show_articles' href='#top'>
            <img src='/images/report.png' />
          </a>
          <a href='http://spitfiresky.com/contact.html'>
            <img src='/images/email.png' />
          </a>
          <a href='http://feeds.feedburner.com/spitfiresky'>
            <img src='/images/rss.png' />
          </a>
          <!-- %a{:href => 'http://github.com/scottmotte/spitfiresky.com/tree/master'} -->
          <!-- %img{:src => '/images/ruby.png'} -->
        </p>
      </div>
      <div class='grid_7' id='content'>
        <div id='twitter'>
          <div class='icon'>
            <a href='http://twitter.com/spitfiresky'>
              <img src='/images/twitter4.png' />
            </a>
          </div>
          <div class='tweets'></div>
          <div class='clear'></div>
        </div>
        <h2>Getting Started with Sinatra</h2>
        <p>
          Sing me a song mister Sinatra. In this tutorial I get you started with sinatra, plus improve the folder structure of your app, and serve it up with unicorn.
        </p>
        <h3>
          Installation
        </h3>
        <p>
          <script src="http://gist.github.com/420466.js?file=gistfile1.txt"></script>
        </p>
        <h3>
          The Basics
        </h3>
        <p>
          <strong>
            Type
            sudo mate hello.rb
          </strong>
          and in the hello.rb put the following:
        </p>
        <p>
          <script src="http://gist.github.com/420468.js?file=hello.rb"></script>
        </p>
        <p>
          Now you just need to run the app. Shotgun is great for this. It's a lot like script/server for unicorn apps.
          <small>
            (We'll use unicorn to do this later, but for now we'll keep it easy with shotgun)
          </small>
        </p>
        <p>
          <script src="http://gist.github.com/420470.js?file=gistfile1.txt"></script>
        </p>
        <strong>
          haml
        </strong>
        <p>
          I like haml so let's bring it into the app now. We've already installed the haml gem so just change your hello.rb file to the following:
        </p>
        <p>
          <script src="http://gist.github.com/420473.js?file=hello.rb"></script>
        </p>
        <h3>
          Move to folder structure
        </h3>
        <p>
          I like an organized application that can handle future complexity. Let's setup a folder structure to make room for that possibility.
        </p>
        <p>
          To begin, create a folder with the name of your app. I'm going to call my app careengine. Then, create the directory structure we'll be using.
        </p>
        <p>
          <script src="http://gist.github.com/420483.js?file=gistfile1.txt"></script>
        </p>
        <p>
          In app.rb put the following:
        </p>
        <p>
          <script src="http://gist.github.com/420485.js?file=app.rb"></script>
        </p>
        <p>
          This tells our / route to use index.haml from our views. Let's create that file now by type sudo mate views/index.haml.
        </p>
        <p>
          <script src="http://gist.github.com/420486.js?file=index.haml"></script>
        </p>
        <h3>
          Unicorn
        </h3>
        <p>
          Now that the app is contained inside a folder structure (slightly similar to rails), let's set the app up to serve itself with unicorn instead of shotgun. (Unicorn is what we will be using on our production server, and It's nice to keep development and production as similar as possible.)
        </p>
        <p>
          <small>
            Don't forget to install unicorn:
            <strong>
              sudo gem install unicorn
            </strong>
          </small>
        </p>
        <p>
          Unicorn works with a config.ru file so let's create that.
        </p>
        <p>
          <strong>
            Type sudo mate config.ru
          </strong>
        </p>
        <p>
          <script src="http://gist.github.com/420493.js?file=config.ru"></script>
        </p>
        <p>
          Now just run the command 'unicorn' in terminal and then browse to http://localhost:8080 to view your app. Alternatively you can type unicorn -p 3000 to specify the port as 3000.
        </p>
        <p>
          Great work, you setup a basic sinatra app, improved on the structure, and served it up with unicorn. You are well on your way to building more complex sinatra applications.
        </p>
        <p class='followme'>
          <strong>
            You should
            <a href='http://twitter.com/spitfiresky'>follow me on twitter here.</a>
          </strong>
        </p>
        <br />
      </div>
    </div>
    <script src='/javascripts/jquery.js' type='text/javascript'></script>
    <script src='/javascripts/jquery.tweet.js' type='text/javascript'></script>
    <script src='/javascripts/blog.js' type='text/javascript'></script>
    <script type='text/javascript'>
      //<![CDATA[
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      //]]>
    </script>
    <script type='text/javascript'>
      //<![CDATA[
        try {
        var pageTracker = _gat._getTracker("UA-10090039-1");
        pageTracker._trackPageview();
        } catch(err) {}
      //]]>
    </script>
  </body>
</html>
